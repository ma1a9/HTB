# <span style="color: blue;">Example 1</span>
![bad5a15ff4565a85f4f025afdc8b6587.png](../../_resources/bad5a15ff4565a85f4f025afdc8b6587.png)
>\`- -\` を使用したコメントは、\`- -\` の後にスペースが続かない場合、しばしば問題を引き起こす可能性があります。そのため、最後にスペースを追加することをお勧めします。
# <span style="color: blue;">Example 2</span>
この制限を回避するには、上で見たトリックですべての行を取得し、SQL キーワード LIMIT を使ってこの数を制限すればよいのです。   
![fb21929386f8cd7dba0f4dcfd1c69471.png](../../_resources/fb21929386f8cd7dba0f4dcfd1c69471.png)   
# <span style="color: blue;">Example 3</span>
ここでは、アポストロフィ (') マークがフィルタリングされています。このフィルタリングから逃れるために、逆引きスラッシュ ( \ ) を使用できます。ユーザー名の部分に`\`を書き、パスワードの部分に`\' or 1=1#`を書きます。   
![cdcdc567ddce9c3f506de259c54bdbc7.png](../../_resources/cdcdc567ddce9c3f506de259c54bdbc7.png)
# <span style="color: blue;">Example 4</span>
この例では、開発者がクエリの一部を直接パラメータに指定しています。これは従来のウェブアプリケーションでは本当に稀なことですが、ウェブサービス、特にモバイルアプリケーションでは時々見かけることがあります。WHERE文に直接注入しているので、リクエストを操作して好きなものを取得することができます。  
![c688a555e0ec69cd4fcc743089053eb4.png](../../_resources/c688a555e0ec69cd4fcc743089053eb4.png)
# <span style="color: blue;">Example 5</span>
これはユニオン ベースの SQL インジェクションの例です。これは、ページが限られた量の結果に基づいて情報を取得していることを意味します。つまり、Web ページはすべてのレコードを取得するクエリを送信していますが、Web ページは表示される結果の量を制限しています。   
![5ed0d59a513a130e1b4522a05d1b7a29.png](../../_resources/5ed0d59a513a130e1b4522a05d1b7a29.png)
# <span style="color: blue;">Example 6</span>
 この例は、例 5 の反復にすぎません。解決するには、2 つのアプローチを使用できます。
- 前と同じようにユニオン選択を使用します (例 5)
- URL からグループを削除します (これによりデータベースがダンプされます)。  
</br>
![346317d4ed6f2a53c339625c280349fc.png](../../_resources/346317d4ed6f2a53c339625c280349fc.png)
![995eb9b931f01f01c5b25d87cc2d5ea2.png](../../_resources/995eb9b931f01f01c5b25d87cc2d5ea2.png)
# <span style="color: blue;">Example 7</span>
この問題を利用するためには、ブラインド SQL インジェクションを使用する必要があります。しかし、エラーメッセージが表示されるので、エラーベースの悪用で情報を取得することができます。

エラーベースの悪用とは、エラーメッセージを利用して情報を収集することです。エラーを起こしやすいステートメントを注入することで、ブラインドSQLインジェクションを使用する代わりに、エラーメッセージから直接情報を取得することができます。
![4f0b5dca9508874bac1016fe59534b09.png](../../_resources/4f0b5dca9508874bac1016fe59534b09.png)

- sqlmapの利用
```
sqlmap -u http://192.168.100.167/sqlinjection/example7/?id=1 -dump-all
```
# <span style="color: blue;">Example 8</span>
これは2次SQLインジェクションで、ページがユーザの入力をフィルタリングしているが、DB上のデータはフィルタリングしていないことを意味します。これを実行するためには、3つのステップを行う必要があります。
- ランダムなユーザーを作成する
- 最初に、クエリ (ペイロード) に挿入するコードを使用してユーザーを作成する必要があります。
- 作成したユーザーを使って、ペイロードを起動させます。
最初に悪用する標準ユーザーを作成します   
![92dd5bff80f7ae5fbc6a89fd04d13dbd.png](../../_resources/92dd5bff80f7ae5fbc6a89fd04d13dbd.png)   
ID番号をクリック  
![078cd4a42c654eb857db7534b5eb3a4d.png](../../_resources/078cd4a42c654eb857db7534b5eb3a4d.png)
![64bf05fcaecff798e9ec354e41a82b34.png](../../_resources/64bf05fcaecff798e9ec354e41a82b34.png)  
# <span style="color: blue;">Example 9</span>
これは、mysql-real-escape-stringと呼ばれるフォームフィルタリング処理を使用したページの例です。これは、与えられたフィールドから任意のエスケープ文字を削除し、攻撃者がフォームフィールドとURLにコードを注入することを阻止するPHP関数です。

この関数には、データベースと接続設定が同じ文字セットを使用していない場合、mysqlがエスケープ文字からエスケープを実行してしまうという欠陥があります。

この場合、GBK(中国語簡体字用の文字セット)の文字セットを挿入できる接続であれば、挿入された文字は有効であるため、関数はエスケープせず、データベースはペイロードを受信することになります。   
![46e53d4e021bc8f30fe4f40a0bc7cc53.png](../../_resources/46e53d4e021bc8f30fe4f40a0bc7cc53.png)   
```
呵' or 1=1 #
```
![7c789c655a2ea24c01dc541fdb1989c8.png](../../_resources/7c789c655a2ea24c01dc541fdb1989c8.png)