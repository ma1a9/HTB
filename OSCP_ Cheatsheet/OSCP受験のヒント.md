## 試験コントロールパネルを読む
1. 事前に各マシンの説明書を読みましょう。
- ADセットの構造について知ることができます。
- あなたに割り当てられたバッファオーバーフローのマシンがあるかどうかがわかります。
2. コントロールパネルに記載されている目標に基づいて計画を立ててください。
- AD セットとスタンドアロン・マシンのどちらから始めるかを確認する。
- 各マシンの要件に沿ったレポートテンプレートのフォーマットを作成する。
## エニュメレーションに関するヒント
### 初期エニュメレーション

- ターゲットに対して軽いスキャンを実行します。
	- 例：試験マシンの10個の共通ポートをスキャンする。
	- 徹底的で長いスキャンを待つ間に、見つかったサービスを手動で操作します。
### 慎重にエニュメレーションを行う

- 複数のターゲットに対して重いスキャンを行わないようにする。
- 安全でないスキャンを実行した後、マシンを元に戻す。
- すべての情報が正しいことを確認するためにスキャンを再実行する。スキャンは不正確な場合があります。
- スキャンの出力を検証するために、さまざまなツールを使用する。
### 列挙は循環的なアプローチである

- 新しいアクセス権を得た後、新しい権限に応じたコンテキストで再度列挙を行う。
	- ウェブページへのログインアクセスを得た場合、そのユーザーとしてウェブアプリを列挙する。
	- もしあなたがマシンへのドメインユーザーアクセスを得たなら、そのユーザーとしてドメインを列挙する。
- この概念はしばしば見落とされます。
	- 学生は、シェル/ルートアクセスを取得した後、列挙を停止する傾向があります。
## エクスプロイトのヒント
### エクスプロイトを使用する前に、必ずエクスプロイトを読んでください。

- エクスプロイトを実行する前に、ファイルやパーミッションを設定する必要がありますか？
- ターゲットに合わせてエクスプロイトを修正する必要があるか？
### 同じ脆弱性に対して、複数のエクスプロイトをチェックすること。

- エクスプロイトでは、脆弱性を悪用するために異なる方法を使用する場合があります。
- エクスプロイトの中には、ターゲットと互換性があるものとないものがあります。
## Active Directory Tips
### ADのエニュメレーション

- ADの初期列挙とエクスプロイトは、スタンドアロンマシンと同様です。
- マシンの役割(DC/クライアント)と存在するサービスを特定します。
- ドメインへの最初のターゲットを特定する（低空飛行の果実）。
### ADエクスプロイト

- ADコマンドの[チートシート](https://github.com/AngelJuanMa/Pentesting/blob/main/Active%20Directory.md)を用意する。
	- 列挙、搾取、搾取後を徹底すること。
- 標準的な列挙を無視せず、アプリケーションやADに関連しないサービスもチェックする。
- 複数のドメインマシンで取得した情報を使ってみる
## ドキュメントとバックアップ
- 使用したコマンド、出力、スクリプト、コードをすべて文書化すること。
	- ターミナルロガーを使って、シェルのすべてのコマンドと出力を自動的に記録する。
- 作業のスナップショットやバックアップを取る。
- 継続的な文書化により、出力が再び必要になったときにコマンドを再実行する時間を節約できます。